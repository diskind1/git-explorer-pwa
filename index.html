<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Updated application name to pkugit -->
    <title>pkugit - המדריך המלא לפקודות Git</title>
    <!-- PWA manifest -->
    <link rel="manifest" href="manifest.json">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Heebo:wght@300;400;500;700&family=Fira+Code:wght@400;500&display=swap');

        :root {
            --git-primary: #F05032;
            --git-secondary: #333333;
            --code-bg: #1e1e1e;
            --code-text: #d4d4d4;
            --bg-light: #f3f4f6;
            --card-bg: #ffffff;
        }

        body {
            font-family: 'Heebo', sans-serif;
            background-color: var(--bg-light);
            color: var(--git-secondary);
        }

        .font-mono {
            font-family: 'Fira Code', monospace;
        }

        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin: auto;
            height: 300px;
        }

        .workflow-step {
            transition: all 0.3s ease;
        }
        .workflow-step:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }

        .cmd-card {
            transition: transform 0.2s, box-shadow 0.2s;
            border-right: 4px solid transparent;
        }
        .cmd-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
            border-right-color: var(--git-primary);
        }

        html {
            scroll-behavior: smooth;
        }
        
        .mobile-menu {
            transition: max-height 0.3s ease-in-out;
            max-height: 0;
            overflow: hidden;
        }
        .mobile-menu.active {
            max-height: 600px;
        }

        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen flex flex-col">

    <div class="relative">
    <!-- Hero background image: replaced with user-provided image -->
    <div class="absolute inset-0 bg-[url('hero.jpg')] bg-cover bg-center opacity-20 pointer-events-none"></div>

    <!-- Header -->
    <header class="bg-white shadow-md sticky top-0 z-50 border-t-4 border-[#F05032]">
        <div class="container mx-auto px-4 py-3">
            <div class="flex justify-between items-center">
                <div class="flex items-center space-x-3 space-x-reverse cursor-pointer" onclick="app.resetView()">
                    <i class="fab fa-git-alt text-[#F05032] text-4xl"></i>
                    <div>
                        <h1 class="text-2xl font-bold text-gray-800">pkugit</h1>
                        <p class="text-xs text-gray-500">המדריך המלא והמקיף ל-Git</p>
                    </div>
                </div>

                <!-- Desktop Nav -->
                <nav class="hidden md:flex space-x-6 space-x-reverse text-sm font-medium">
                    <button onclick="app.filterLevel('basic')" class="nav-btn hover:text-[#F05032] transition-colors">בסיסי</button>
                    <button onclick="app.filterLevel('advanced')" class="nav-btn hover:text-[#F05032] transition-colors">מתקדם</button>
                    <button onclick="app.filterLevel('master')" class="nav-btn hover:text-[#F05032] transition-colors">מומחה</button>
                    <button onclick="app.showSection('workflows')" class="nav-btn hover:text-[#F05032] transition-colors">זרימות עבודה</button>
                    <button onclick="app.showSection('troubleshoot')" class="nav-btn hover:text-[#F05032] transition-colors">פתרון תקלות</button>
                </nav>
                <!-- Language Selector (desktop) -->
                <div class="hidden md:block ml-4">
                    <select onchange="location.href=this.value" class="p-2 border rounded bg-white text-gray-700">
                        <option value="index.html" selected>עברית</option>
                        <option value="index_en.html">English</option>
                        <option value="index_ru.html">Русский</option>
                        <option value="index_fr.html">Français</option>
                    </select>
                </div>


                <!-- Search -->
                <div class="hidden md:block relative">
                    <input type="text" id="searchInput" placeholder="חפש פקודה (למשל checkout)..." 
                           class="pr-10 pl-4 py-2 border rounded-full text-sm focus:outline-none focus:ring-2 focus:ring-[#F05032] w-64">
                    <i class="fas fa-search absolute right-3 top-2.5 text-gray-400"></i>
                </div>


                <button class="md:hidden text-gray-600 focus:outline-none" onclick="document.querySelector('.mobile-menu').classList.toggle('active')">
                    <i class="fas fa-bars text-xl"></i>
                </button>
            </div>

            <!-- Mobile Menu -->
            <div class="mobile-menu md:hidden mt-2 bg-gray-50 rounded-lg shadow-inner">
                <div class="flex flex-col p-4 space-y-2">
                    <input type="text" placeholder="חפש..." oninput="app.handleSearch(this.value)" class="p-2 border rounded w-full mb-2">
                    <button onclick="app.filterLevel('basic')" class="text-right py-2 border-b">בסיסי</button>
                    <button onclick="app.filterLevel('advanced')" class="text-right py-2 border-b">מתקדם</button>
                    <button onclick="app.filterLevel('master')" class="text-right py-2 border-b">מומחה</button>
                    <button onclick="app.showSection('workflows')" class="text-right py-2 border-b">זרימות עבודה</button>
                    <button onclick="app.showSection('troubleshoot')" class="text-right py-2">פתרון תקלות</button>
                    <!-- Language Selector (mobile) -->
                    <select onchange="location.href=this.value" class="p-2 border rounded w-full mt-2">
                        <option value="index.html" selected>עברית</option>
                        <option value="index_en.html">English</option>
                        <option value="index_ru.html">Русский</option>
                        <option value="index_fr.html">Français</option>
                    </select>
                </div>
            </div>
        </div>
    </header>

    <main id="mainContent" class="flex-grow container mx-auto px-4 py-8 relative z-10">
        
        <!-- Hero Section -->
        <div id="heroSection" class="text-center py-10 fade-in">
            <h2 class="text-4xl font-bold text-gray-800 mb-4">כל פקודות Git במקום אחד</h2>
            <p class="text-xl text-gray-600 mb-8 max-w-2xl mx-auto">
                המדריך המלא שעודכן עם כל פקודות ה-Cheat Sheet. חפש פקודה או בחר רמה כדי להתחיל.
            </p>
            
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 max-w-4xl mx-auto mb-12">
                <div class="bg-white p-6 rounded-xl shadow-sm border-t-4 border-green-500 cursor-pointer hover:shadow-md transition" onclick="app.filterLevel('basic')">
                    <i class="fas fa-seedling text-green-500 text-3xl mb-3"></i>
                    <h3 class="text-lg font-bold">מתחילים</h3>
                    <p class="text-sm text-gray-500">הגדרות, Init, Workflow בסיסי, לוגים וחיבור ל-Remote.</p>
                </div>
                <div class="bg-white p-6 rounded-xl shadow-sm border-t-4 border-blue-500 cursor-pointer hover:shadow-md transition" onclick="app.filterLevel('advanced')">
                    <i class="fas fa-code-branch text-blue-500 text-3xl mb-3"></i>
                    <h3 class="text-lg font-bold">מתקדמים</h3>
                    <p class="text-sm text-gray-500">Stash, Rebase, Cherry-pick, Reflog ובדיקות השוואה.</p>
                </div>
                <div class="bg-white p-6 rounded-xl shadow-sm border-t-4 border-purple-500 cursor-pointer hover:shadow-md transition" onclick="app.filterLevel('master')">
                    <i class="fas fa-hat-wizard text-purple-500 text-3xl mb-3"></i>
                    <h3 class="text-lg font-bold">מומחים</h3>
                    <p class="text-sm text-gray-500">Bisect, Submodules, Worktrees, Hooks ותחזוקת מאגרים.</p>
                </div>
            </div>

            <div class="bg-white p-6 rounded-xl shadow-lg max-w-2xl mx-auto">
                <h3 class="text-lg font-bold mb-4 text-gray-700">התפלגות הפקודות באתר</h3>
                <div class="chart-container">
                    <canvas id="commandsChart"></canvas>
                </div>
            </div>
        </div>

        <!-- Commands Grid Section -->
        <div id="commandsSection" class="hidden fade-in">
            <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4">
                <div>
                    <h2 id="sectionTitle" class="text-3xl font-bold text-gray-800 border-r-4 border-[#F05032] pr-4">פקודות</h2>
                    <p id="sectionDesc" class="text-gray-500 text-sm mt-1 pr-4"></p>
                </div>
                <div class="flex items-center space-x-2 space-x-reverse bg-white p-2 rounded shadow-sm">
                    <span class="text-sm text-gray-500 flex items-center whitespace-nowrap"><i class="fas fa-filter ml-2"></i> סנן קטגוריה:</span>
                    <select id="categoryFilter" onchange="app.filterCategory()" class="border-none focus:ring-0 text-sm bg-transparent font-bold text-[#F05032]">
                        <option value="all">הכל</option>
                    </select>
                </div>
            </div>
            
            <!-- סרגל הפקודות: עמודה אחת כברירת מחדל; JavaScript יעדכן את מספר העמודות בהתאם למספר הפקודות -->
            <div id="commandsGrid" class="grid grid-cols-1 gap-6">
                <!-- Cards injected here -->
            </div>
        </div>

        <!-- Workflows Section -->
        <div id="workflowsSection" class="hidden fade-in">
            <h2 class="text-3xl font-bold text-gray-800 mb-6 border-r-4 border-[#F05032] pr-4">זרימות עבודה (Workflows)</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <!-- Simple Workflow -->
                <div class="bg-white rounded-xl shadow-lg overflow-hidden border border-gray-100">
                    <div class="bg-gray-800 p-4 text-white flex justify-between items-center">
                        <h3 class="font-bold">Feature Branch Workflow</h3>
                        <i class="fas fa-code-branch"></i>
                    </div>
                    <div class="p-6">
                        <div class="relative border-l-2 border-dashed border-gray-300 ml-4 pl-8 space-y-6">
                            <div class="workflow-step relative">
                                <div class="absolute -right-12 top-0 w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center text-white text-xs z-10">1</div>
                                <h4 class="font-bold text-gray-800">יצירת ענף</h4>
                                <code class="block bg-gray-100 p-2 rounded text-xs mt-1 text-left font-mono" dir="ltr">git checkout -b feature/name main</code>
                            </div>
                            <div class="workflow-step relative">
                                <div class="absolute -right-12 top-0 w-8 h-8 bg-green-500 rounded-full flex items-center justify-center text-white text-xs z-10">2</div>
                                <h4 class="font-bold text-gray-800">פיתוח וקומיט</h4>
                                <code class="block bg-gray-100 p-2 rounded text-xs mt-1 text-left font-mono" dir="ltr">git add . && git commit -m "Work"</code>
                            </div>
                            <div class="workflow-step relative">
                                <div class="absolute -right-12 top-0 w-8 h-8 bg-purple-500 rounded-full flex items-center justify-center text-white text-xs z-10">3</div>
                                <h4 class="font-bold text-gray-800">מיזוג (Merge)</h4>
                                <code class="block bg-gray-100 p-2 rounded text-xs mt-1 text-left font-mono" dir="ltr">git checkout main && git merge feature/name</code>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Rebase Workflow -->
                <div class="bg-white rounded-xl shadow-lg overflow-hidden border border-gray-100">
                    <div class="bg-[#F05032] p-4 text-white flex justify-between items-center">
                        <h3 class="font-bold">Rebase Workflow</h3>
                        <i class="fas fa-sync-alt"></i>
                    </div>
                    <div class="p-6">
                        <p class="text-sm text-gray-600 mb-4">שמירה על היסטוריה ליניארית ונקייה לפני מיזוג:</p>
                        <div class="space-y-3 font-mono text-xs" dir="ltr">
                            <div class="p-2 bg-gray-100 rounded">git fetch origin</div>
                            <div class="p-2 bg-gray-100 rounded">git rebase origin/main</div>
                            <div class="p-2 bg-gray-100 rounded text-gray-500 italic"># Resolve conflicts if any</div>
                            <div class="p-2 bg-gray-100 rounded">git push --force-with-lease</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Troubleshooting Section -->
        <div id="troubleshootSection" class="hidden fade-in">
            <h2 class="text-3xl font-bold text-gray-800 mb-6 border-r-4 border-[#F05032] pr-4">פתרון תקלות</h2>
            <div class="bg-white rounded-xl shadow-lg p-8 max-w-4xl mx-auto">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4" id="ts-options">
                    <button onclick="app.showSolution('undo-commit')" class="p-4 border rounded-lg hover:bg-[#F05032] hover:text-white transition text-right group">
                        <i class="fas fa-undo ml-2 text-[#F05032] group-hover:text-white"></i> ביטול קומיט מקומי (שמירת שינויים)
                    </button>
                    <button onclick="app.showSolution('wrong-branch')" class="p-4 border rounded-lg hover:bg-[#F05032] hover:text-white transition text-right group">
                        <i class="fas fa-exchange-alt ml-2 text-[#F05032] group-hover:text-white"></i> קומיט בטעות לענף הלא נכון
                    </button>
                    <button onclick="app.showSolution('unstage')" class="p-4 border rounded-lg hover:bg-[#F05032] hover:text-white transition text-right group">
                        <i class="fas fa-backspace ml-2 text-[#F05032] group-hover:text-white"></i> ביטול git add לקובץ מסוים
                    </button>
                    <button onclick="app.showSolution('recover')" class="p-4 border rounded-lg hover:bg-[#F05032] hover:text-white transition text-right group">
                        <i class="fas fa-life-ring ml-2 text-[#F05032] group-hover:text-white"></i> שחזור ענף שנמחק בטעות
                    </button>
                </div>

                <div id="ts-solution" class="hidden mt-8 p-6 bg-gray-50 rounded-xl border border-gray-200">
                    <div class="flex justify-between items-center mb-4">
                        <h4 class="font-bold text-lg text-[#F05032]" id="ts-solution-title"></h4>
                        <button onclick="document.getElementById('ts-solution').classList.add('hidden')" class="text-gray-400 hover:text-gray-600"><i class="fas fa-times"></i></button>
                    </div>
                    <p class="mb-4 text-gray-700" id="ts-solution-desc"></p>
                    <div class="bg-[#1e1e1e] p-4 rounded-lg text-left" dir="ltr">
                        <code id="ts-solution-code" class="text-green-400 font-mono text-sm"></code>
                    </div>
                </div>
            </div>
        </div>

    </main>

    <footer class="bg-gray-800 text-white py-10 mt-12 border-b-8 border-[#F05032]">
        <div class="container mx-auto px-4 text-center">
           <div class="flex justify-center space-x-6 space-x-reverse mb-6">
  <a href="https://github.com/" class="text-2xl hover:text-[#F05032]" target="_blank" aria-label="GitHub">
    <i class="fab fa-github"></i>
  </a>
  <a href="https://stackoverflow.com/questions" class="text-2xl hover:text-[#F05032]" target="_blank" aria-label="Stack Overflow">
    <i class="fab fa-stack-overflow"></i>
  </a>
</div>

            <p class="text-gray-400 text-sm mb-2">עודכן עם כל פקודות ה-Complete Reference Guide</p>
            <a href="https://share.google/ASExj6dNud3na5a0d" class="text-xs text-gray-500" style="color: aqua; font-size: 100%;">נוצר ע"י מני דיסקינד וצ'אט... :) על בסיס מה שיוסף שלח.</a>
        </div>
    </footer>
    </div>
    <script>
        const gitData = {
            basic: {
                title: "פקודות בסיסיות",
                desc: "היסודות שכל מפתח חייב להכיר: הגדרות, יצירת מאגר, זרימת עבודה יומיומית וניהול ענפים.",
                categories: ["הגדרות", "אתחול", "עבודה שוטפת", "היסטוריה", "ענפים", "מיזוג", "שרת מרוחק", "ביטול שינויים", "תיוג"],
                commands: [
                    // Configuration
                    { cmd: 'git config --global user.name "Name"', desc: 'הגדרת שם המשתמש הגלובלי לכל הקומיטים במערכת.', cat: 'הגדרות', example: 'git config --global user.name "John Doe"' },
                    { cmd: 'git config --global user.email "email"', desc: 'הגדרת המייל הגלובלי שיופיע בהיסטוריית הפרויקט.', cat: 'הגדרות', example: 'git config --global user.email "john@example.com"' },
                    { cmd: 'git config --list', desc: 'הצגת כל הגדרות ה-Git הנוכחיות המוגדרות במערכת.', cat: 'הגדרות', example: 'git config --list' },
                    { cmd: 'git config --global --edit', desc: 'פתיחת קובץ ההגדרות הגלובלי בעורך הטקסט המוגדר.', cat: 'הגדרות', example: 'git config --global --edit' },
                    // Setup
                    { cmd: 'git init', desc: 'יצירת מאגר Git חדש (תיקיית .git) בתיקייה הנוכחית.', cat: 'אתחול', example: 'git init' },
                    { cmd: 'git clone <url>', desc: 'הורדת עותק מלא של מאגר מרוחק למחשב המקומי.', cat: 'אתחול', example: 'git clone https://github.com/user/repo.git' },
                    { cmd: 'git clone <url> <dir>', desc: 'שכפול מאגר מרוחק לתוך תיקייה בשם ספציפי.', cat: 'אתחול', example: 'git clone <url> my-custom-folder' },
                    // Workflow
                    { cmd: 'git status', desc: 'הצגת המצב הנוכחי: קבצים ששונו, קבצים מוכנים (staged) וענף נוכחי.', cat: 'עבודה שוטפת', example: 'git status' },
                    { cmd: 'git add <file>', desc: 'הוספת קובץ ספציפי לאזור ההכנה (Staging) לקראת קומיט.', cat: 'עבודה שוטפת', example: 'git add index.html' },
                    { cmd: 'git add .', desc: 'הוספת כל הקבצים ששונו בתיקייה הנוכחית ל-Staging.', cat: 'עבודה שוטפת', example: 'git add .' },
                    { cmd: 'git add -A', desc: 'הוספת כל השינויים במאגר (כולל מחיקות) ל-Staging.', cat: 'עבודה שוטפת', example: 'git add -A' },
                    { cmd: 'git add -p', desc: 'הוספה אינטראקטיבית: מאפשר לבחור חלקים ספציפיים (chunks) מתוך קובץ.', cat: 'עבודה שוטפת', example: 'git add -p file.txt' },
                    { cmd: 'git commit -m "msg"', desc: 'יצירת קומיט (Snapshot) עם הודעה המתארת את השינויים.', cat: 'עבודה שוטפת', example: 'git commit -m "Fix login bug"' },
                    { cmd: 'git commit -am "msg"', desc: 'הוספה של כל הקבצים המעוקבים וביצוע קומיט בפעולה אחת.', cat: 'עבודה שוטפת', example: 'git commit -am "Quick fix"' },
                    { cmd: 'git commit --amend', desc: 'עריכת הקומיט האחרון (הוספת קבצים או שינוי הודעה).', cat: 'עבודה שוטפת', example: 'git commit --amend --no-edit' },
                    // History
                    { cmd: 'git log', desc: 'הצגת רשימת הקומיטים המלאה בסדר כרונולוגי הפוך.', cat: 'היסטוריה', example: 'git log' },
                    { cmd: 'git log --oneline', desc: 'הצגת ההיסטוריה בצורה תמציתית (שורה אחת לקומיט).', cat: 'היסטוריה', example: 'git log --oneline' },
                    { cmd: 'git log --graph', desc: 'הצגת ההיסטוריה עם תרשים ASCII של ענפים ומיזוגים.', cat: 'היסטוריה', example: 'git log --graph --oneline --all' },
                    { cmd: 'git log -p', desc: 'הצגת השינויים (diff) המפורטים שבוצעו בכל קומיט.', cat: 'היסטוריה', example: 'git log -p' },
                    { cmd: 'git show <commit>', desc: 'הצגת פרטים מלאים ושינויי קוד של קומיט ספציפי.', cat: 'היסטוריה', example: 'git show abc1234' },
                    { cmd: 'git diff', desc: 'הצגת שינויים שבוצעו בקבצים אך עדיין לא נוספו ל-Staging.', cat: 'היסטוריה', example: 'git diff' },
                    { cmd: 'git diff --staged', desc: 'הצגת השינויים שנמצאים ב-Staging וייכנסו לקומיט הבא.', cat: 'היסטוריה', example: 'git diff --staged' },
                    // Branching
                    { cmd: 'git branch', desc: 'רשימת כל הענפים המקומיים. הענף הנוכחי מסומן ב-* .', cat: 'ענפים', example: 'git branch' },
                    { cmd: 'git branch <name>', desc: 'יצירת ענף חדש (ללא מעבר אליו).', cat: 'ענפים', example: 'git branch feature-x' },
                    { cmd: 'git checkout <branch>', desc: 'מעבר לענף קיים.', cat: 'ענפים', example: 'git checkout main' },
                    { cmd: 'git checkout -b <name>', desc: 'יצירת ענף חדש ומעבר אליו מיד.', cat: 'ענפים', example: 'git checkout -b new-feature' },
                    { cmd: 'git switch <branch>', desc: 'הפקודה המודרנית למעבר בין ענפים.', cat: 'ענפים', example: 'git switch dev' },
                    { cmd: 'git branch -d <name>', desc: 'מחיקת ענף (בטוחה: לא ימחק אם יש שינויים שלא מוגזו).', cat: 'ענפים', example: 'git branch -d old-feature' },
                    { cmd: 'git branch -D <name>', desc: 'מחיקת ענף בכוח (גם אם לא מוזג).', cat: 'ענפים', example: 'git branch -D experimental' },
                    // Merging
                    { cmd: 'git merge <branch>', desc: 'מיזוג ענף ספציפי לתוך הענף הנוכחי.', cat: 'מיזוג', example: 'git merge feature-a' },
                    { cmd: 'git merge --no-ff', desc: 'מיזוג תוך יצירת קומיט מיזוג תמיד (שומר על היסטוריית ענפים).', cat: 'מיזוג', example: 'git merge --no-ff feature-b' },
                    { cmd: 'git merge --abort', desc: 'ביטול תהליך המיזוג וחזרה למצב שלפניו (במקרה של קונפליקטים).', cat: 'מיזוג', example: 'git merge --abort' },
                    // Remote
                    { cmd: 'git remote -v', desc: 'הצגת רשימת השרתים המרוחקים והכתובות שלהם.', cat: 'שרת מרוחק', example: 'git remote -v' },
                    { cmd: 'git remote add <n> <u>', desc: 'חיבור המאגר המקומי לשרת מרוחק חדש.', cat: 'שרת מרוחק', example: 'git remote add origin https://...' },
                    { cmd: 'git fetch', desc: 'הורדת עדכונים מהשרת המרוחק מבלי לשנות את קבצי העבודה.', cat: 'שרת מרוחק', example: 'git fetch origin' },
                    { cmd: 'git pull', desc: 'הורדת עדכונים ומיזוגם לענף הנוכחי באופן מיידי.', cat: 'שרת מרוחק', example: 'git pull origin main' },
                    { cmd: 'git push', desc: 'העלאת הקומיטים המקומיים לשרת המרוחק.', cat: 'שרת מרוחק', example: 'git push origin main' },
                    { cmd: 'git push -u origin <br>', desc: 'העלאת ענף חדש והגדרתו כענף המעקב (upstream).', cat: 'שרת מרוחק', example: 'git push -u origin feature' },
                    // Undo
                    { cmd: 'git restore <file>', desc: 'ביטול שינויים בקובץ וחזרה למצב האחרון בקומיט.', cat: 'ביטול שינויים', example: 'git restore config.json' },
                    { cmd: 'git restore --staged <f>', desc: 'הוצאת קובץ מאזור ה-Staging (החזרה למצב modified).', cat: 'ביטול שינויים', example: 'git restore --staged index.html' },
                    { cmd: 'git clean -fd', desc: 'מחיקת כל הקבצים והתיקיות שאינם במעקב (untracked).', cat: 'ביטול שינויים', example: 'git clean -fd' },
                    // Tagging
                    { cmd: 'git tag', desc: 'רשימת כל התגים (גרסאות) במאגר.', cat: 'תיוג', example: 'git tag' },
                    { cmd: 'git tag -a <v> -m "msg"', desc: 'יצירת תג מוערך (Annotated) עם הודעה.', cat: 'תיוג', example: 'git tag -a v1.0 -m "Release v1"' }
                ]
            },
            advanced: {
                title: "פקודות מתקדמות",
                desc: "שליטה מתקדמת בהיסטוריה, שחזור נתונים, עבודה עם Stash וניהול מורכב של ענפים.",
                categories: ["ענפים מתקדם", "מיזוג מתקדם", "Stashing", "איפוס (Reset)", "ביטול (Revert)", "שכתוב (Rebase)", "Cherry-picking", "היסטוריה עמוקה", "בדיקה והשוואה"],
                commands: [
                    // Advanced Branching
                    { cmd: 'git branch -vv', desc: 'הצגת ענפים עם מידע מפורט על מצבם מול ה-Remote.', cat: 'ענפים מתקדם', example: 'git branch -vv' },
                    { cmd: 'git branch --merged', desc: 'הצגת ענפים שכבר מוזגו לענף הנוכחי (בטוחים למחיקה).', cat: 'ענפים מתקדם', example: 'git branch --merged' },
                    // Advanced Merging
                    { cmd: 'git merge --squash <br>', desc: 'מיזוג כל הקומיטים מהענף לקומיט אחד בודד בענף היעד.', cat: 'מיזוג מתקדם', example: 'git merge --squash feature-x' },
                    { cmd: 'git merge -X ours <br>', desc: 'מיזוג תוך פתרון קונפליקטים אוטומטי לטובת הגרסה שלנו.', cat: 'מיזוג מתקדם', example: 'git merge -X ours main' },
                    // Stashing
                    { cmd: 'git stash', desc: 'שמירה זמנית של שינויים לא גמורים בצד וניקוי סביבת העבודה.', cat: 'Stashing', example: 'git stash' },
                    { cmd: 'git stash list', desc: 'הצגת רשימת כל השמירות הזמניות (stashes).', cat: 'Stashing', example: 'git stash list' },
                    { cmd: 'git stash pop', desc: 'החזרת השמירה האחרונה ומחיקתה מהרשימה.', cat: 'Stashing', example: 'git stash pop' },
                    { cmd: 'git stash apply stash@{n}', desc: 'החלת שמירה ספציפית מבלי למחוק אותה.', cat: 'Stashing', example: 'git stash apply stash@{1}' },
                    { cmd: 'git stash clear', desc: 'מחיקת כל השמירות הזמניות לצמיתות.', cat: 'Stashing', example: 'git stash clear' },
                    // Reset
                    { cmd: 'git reset --soft HEAD~1', desc: 'ביטול הקומיט האחרון. השינויים נשארים ב-Staging.', cat: 'איפוס (Reset)', example: 'git reset --soft HEAD~1' },
                    { cmd: 'git reset --mixed HEAD~1', desc: 'ביטול קומיט. השינויים נשארים בקבצים אך יוצאים מ-Staging.', cat: 'איפוס (Reset)', example: 'git reset HEAD~1' },
                    { cmd: 'git reset --hard HEAD~1', desc: 'מחיקה מוחלטת של הקומיט האחרון וכל השינויים בו. זהירות!', cat: 'איפוס (Reset)', example: 'git reset --hard HEAD~1' },
                    // Revert
                    { cmd: 'git revert <commit>', desc: 'יצירת קומיט חדש שמבצע פעולה הפוכה מקומיט ספציפי (בטוח ל-Remote).', cat: 'ביטול (Revert)', example: 'git revert abc1234' },
                    // Rebase
                    { cmd: 'git rebase <branch>', desc: 'העברת היסטוריית הענף הנוכחי והדבקתה מעל קצה של ענף אחר.', cat: 'שכתוב (Rebase)', example: 'git rebase main' },
                    { cmd: 'git rebase -i HEAD~n', desc: 'ריבייס אינטראקטיבי: עריכה, איחוד (squash) או מחיקת קומיטים מההיסטוריה.', cat: 'שכתוב (Rebase)', example: 'git rebase -i HEAD~3' },
                    // Cherry-pick
                    { cmd: 'git cherry-pick <commit>', desc: 'העתקת קומיט ספציפי מענף אחד והחלתו על הענף הנוכחי.', cat: 'Cherry-picking', example: 'git cherry-pick abc1234' },
                    // Advanced History
                    { cmd: 'git reflog', desc: 'יומן תנועות ה-HEAD. מאפשר לשחזר כמעט כל דבר, גם אם "נמחק".', cat: 'היסטוריה עמוקה', example: 'git reflog' },
                    { cmd: 'git log -S "string"', desc: 'חיפוש קומיטים שהוסיפו או הסירו מחרוזת טקסט ספציפית.', cat: 'היסטוריה עמוקה', example: 'git log -S "apiKey"' },
                    { cmd: 'git blame <file>', desc: 'הצגת הקומיט והכותב האחרון עבור כל שורה בקובץ.', cat: 'היסטוריה עמוקה', example: 'git blame index.js' },
                    // Inspection
                    { cmd: 'git diff <b1>..<b2>', desc: 'השוואת הבדלים בין שני ענפים שונים.', cat: 'בדיקה והשוואה', example: 'git diff main..dev' },
                    { cmd: 'git ls-files -o', desc: 'הצגת רשימת כל הקבצים שאינם במעקב (untracked).', cat: 'בדיקה והשוואה', example: 'git ls-files -o' }
                ]
            },
            master: {
                title: "פקודות למומחים",
                desc: "כלים מתקדמים לניהול פרויקטים מורכבים, תיקון היסטוריה עמוקה, תחזוקה ואיתור באגים.",
                categories: ["איתור באגים (Bisect)", "Submodules", "Worktrees", "תחזוקה", "שחזור וכלים", "Patching", "הגדרות מתקדמות"],
                commands: [
                    // Bisect
                    { cmd: 'git bisect start', desc: 'תחילת חיפוש בינארי לאיתור הקומיט שבו נוצר באג.', cat: 'איתור באגים (Bisect)', example: 'git bisect start\ngit bisect bad\ngit bisect good v1.0' },
                    { cmd: 'git bisect run <script>', desc: 'הרצה אוטומטית של סקריפט בדיקה כדי למצוא את הקומיט הבעייתי.', cat: 'איתור באגים (Bisect)', example: 'git bisect run npm test' },
                    // Submodules
                    { cmd: 'git submodule add <url>', desc: 'הוספת פרויקט Git אחר כתיקיית משנה בתוך הפרויקט שלך.', cat: 'Submodules', example: 'git submodule add https://...' },
                    { cmd: 'git submodule update --init', desc: 'אתחול ועדכון כל תתי-המודולים בפרויקט משוכפל.', cat: 'Submodules', example: 'git submodule update --init --recursive' },
                    // Worktrees
                    { cmd: 'git worktree add <path> <br>', desc: 'ניהול מספר ענפים בו-זמנית בתיקיות נפרדות באותו המחשב.', cat: 'Worktrees', example: 'git worktree add ../feature-branch dev' },
                    // Maintenance
                    { cmd: 'git gc --aggressive', desc: 'ביצוע אופטימיזציה עמוקה למאגר הנתונים (Garbage Collection).', cat: 'תחזוקה', example: 'git gc --aggressive' },
                    { cmd: 'git fsck', desc: 'בדיקת תקינות הקבצים הפנימיים של המאגר.', cat: 'תחזוקה', example: 'git fsck --full' },
                    { cmd: 'git count-objects -vH', desc: 'הצגת סטטיסטיקות על הגודל והאובייקטים במאגר.', cat: 'תחזוקה', example: 'git count-objects -vH' },
                    // Patching
                    { cmd: 'git format-patch HEAD~1', desc: 'יצירת קובץ טלאי (patch) מקומיט שניתן לשלוח במייל.', cat: 'Patching', example: 'git format-patch HEAD~1' },
                    { cmd: 'git apply <patch>', desc: 'החלת שינויים מקובץ טלאי מבלי ליצור קומיט.', cat: 'Patching', example: 'git apply fix.patch' },
                    // Advanced History Rewrite
                    { cmd: 'git filter-repo', desc: 'כלי מודרני לשכתוב היסטוריה (למשל הסרת קבצים רגישים מכל העבר).', cat: 'שחזור וכלים', example: 'git filter-repo --path secret.txt --invert-paths' },
                    { cmd: 'git rev-parse HEAD', desc: 'חילוץ ה-Hash המלא של הקומיט הנוכחי.', cat: 'שחזור וכלים', example: 'git rev-parse HEAD' },
                    { cmd: 'git describe', desc: 'יצירת שם גרסה קריא המבוסס על התג האחרון והקומיטים מאז.', cat: 'שחזור וכלים', example: 'git describe' },
                    // Advanced Config
                    { cmd: 'git config --global alias.<name> <cmd>', desc: 'יצירת קיצור דרך (alias) לפקודה ארוכה.', cat: 'הגדרות מתקדמות', example: 'git config --global alias.co checkout' }
                ]
            }
        };

        const troubleshootingData = {
            'undo-commit': {
                title: 'ביטול קומיט אחרון (שמירת עבודה)',
                desc: 'הקומיט יבוטל, אך כל השינויים שביצעת יישארו ב-Staging כדי שתוכל לתקן אותם.',
                code: 'git reset --soft HEAD~1'
            },
            'wrong-branch': {
                title: 'הקומיט בוצע לענף הלא נכון',
                desc: 'העבר את הקומיט האחרון לענף אחר ובטל אותו מהנוכחי:',
                code: 'git branch correct-branch\ngit reset --hard HEAD~1\ngit checkout correct-branch'
            },
            'unstage': {
                title: 'ביטול git add לקובץ',
                desc: 'הסרת קובץ שהוספת בטעות ל-Staging מבלי למחוק את השינויים בו:',
                code: 'git restore --staged <file_name>'
            },
            'recover': {
                title: 'שחזור ענף שנמחק',
                desc: 'מצא את ה-Hash של הענף ב-Reflog ושחזר אותו:',
                code: 'git reflog\n# מצא את הקומיט האחרון בענף\ngit checkout -b recovered-branch <hash>'
            }
        };

        const app = {
            currentLevel: 'all',
            
            init() {
                this.renderChart();
                this.setupSearch();
            },

            renderChart() {
                const ctx = document.getElementById('commandsChart').getContext('2d');
                new Chart(ctx, {
                    type: 'doughnut',
                    data: {
                        labels: ['בסיסי', 'מתקדם', 'מומחה'],
                        datasets: [{
                            data: [
                                gitData.basic.commands.length, 
                                gitData.advanced.commands.length, 
                                gitData.master.commands.length
                            ],
                            backgroundColor: ['#22c55e', '#3b82f6', '#a855f7'],
                            borderWidth: 5,
                            borderColor: '#ffffff'
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { position: 'bottom', labels: { font: { family: 'Heebo', size: 14 } } }
                        }
                    }
                });
            },

            resetView() {
                document.getElementById('heroSection').classList.remove('hidden');
                document.getElementById('commandsSection').classList.add('hidden');
                document.getElementById('workflowsSection').classList.add('hidden');
                document.getElementById('troubleshootSection').classList.add('hidden');
                document.getElementById('searchInput').value = '';
                window.scrollTo(0,0);
            },

            filterLevel(level) {
                this.currentLevel = level;
                document.getElementById('heroSection').classList.add('hidden');
                document.getElementById('workflowsSection').classList.add('hidden');
                document.getElementById('troubleshootSection').classList.add('hidden');
                document.getElementById('commandsSection').classList.remove('hidden');
                
                const data = gitData[level];
                document.getElementById('sectionTitle').innerText = data.title;
                document.getElementById('sectionDesc').innerText = data.desc;
                
                const catSelect = document.getElementById('categoryFilter');
                catSelect.innerHTML = '<option value="all">כל הקטגוריות</option>' + 
                    data.categories.map(c => `<option value="${c}">${c}</option>`).join('');
                
                this.renderCommands(data.commands);
                window.scrollTo(0,0);
            },

            renderCommands(commands) {
                const grid = document.getElementById('commandsGrid');
                // אם אין פקודות תואמות – הצג הודעה והתא את העמודה לאחת
                if (commands.length === 0) {
                    grid.className = 'grid grid-cols-1 gap-6';
                    grid.innerHTML = '<div class="col-span-full py-10 text-center text-gray-400">לא נמצאו פקודות תואמות...</div>';
                    return;
                }
                // קבע את מספר העמודות על־פי כמות הפקודות
                if (commands.length === 1) {
                    grid.className = 'grid grid-cols-1 gap-6';
                } else {
                    grid.className = 'grid grid-cols-1 md:grid-cols-2 gap-6';
                }
                grid.innerHTML = commands.map(cmd => `
                    <div class="cmd-card bg-white rounded-xl shadow-sm border border-gray-100 p-6 flex flex-col justify-between h-full">
                        <div>
                            <div class="flex justify-between items-start mb-3">
                                <span class="text-[10px] font-bold uppercase tracking-widest text-white bg-gray-400 px-2 py-1 rounded">${cmd.cat}</span>
                                <button onclick="app.copyToClipboard(\`${cmd.example.replace(/\n/g, '\\n')}\`)" class="text-gray-300 hover:text-[#F05032] transition-colors" title="העתק">
                                    <i class="far fa-copy"></i>
                                </button>
                            </div>
                            <h3 class="font-mono text-lg font-bold text-gray-800 mb-2 border-b border-gray-50 pb-2" dir="ltr">${cmd.cmd}</h3>
                            <p class="text-gray-600 text-sm leading-relaxed mb-4">${cmd.desc}</p>
                        </div>
                        <div class="bg-gray-900 p-4 rounded-lg text-left overflow-x-auto border-l-4 border-green-500">
                            <code class="font-mono text-sm text-green-400 whitespace-pre" dir="ltr">${cmd.example}</code>
                        </div>
                    </div>
                `).join('');
            },

            filterCategory() {
                const cat = document.getElementById('categoryFilter').value;
                const allCmds = gitData[this.currentLevel].commands;
                const filtered = cat === 'all' ? allCmds : allCmds.filter(c => c.cat === cat);
                this.renderCommands(filtered);
            },

            showSection(section) {
                document.getElementById('heroSection').classList.add('hidden');
                document.getElementById('commandsSection').classList.add('hidden');
                document.getElementById('workflowsSection').classList.add('hidden');
                document.getElementById('troubleshootSection').classList.add('hidden');
                
                if (section === 'workflows') document.getElementById('workflowsSection').classList.remove('hidden');
                if (section === 'troubleshoot') document.getElementById('troubleshootSection').classList.remove('hidden');
                window.scrollTo(0,0);
            },

            showSolution(key) {
                const sol = troubleshootingData[key];
                document.getElementById('ts-solution-title').innerText = sol.title;
                document.getElementById('ts-solution-desc').innerText = sol.desc;
                document.getElementById('ts-solution-code').innerText = sol.code;
                document.getElementById('ts-solution').classList.remove('hidden');
            },

            setupSearch() {
                const input = document.getElementById('searchInput');
                input.addEventListener('input', (e) => {
                    this.handleSearch(e.target.value);
                });
            },
            
            handleSearch(term) {
                 const lowerTerm = term.toLowerCase();
                 if(!lowerTerm) { 
                    if(this.currentLevel === 'all') this.resetView(); 
                    else this.filterLevel(this.currentLevel);
                    return; 
                 }
                 
                 let allCommands = [];
                 Object.values(gitData).forEach(lvl => allCommands.push(...lvl.commands));
                 const filtered = allCommands.filter(c => 
                    c.cmd.toLowerCase().includes(lowerTerm) || 
                    c.desc.toLowerCase().includes(lowerTerm) ||
                    c.cat.toLowerCase().includes(lowerTerm)
                 );
                 
                 document.getElementById('heroSection').classList.add('hidden');
                 document.getElementById('workflowsSection').classList.add('hidden');
                 document.getElementById('troubleshootSection').classList.add('hidden');
                 document.getElementById('commandsSection').classList.remove('hidden');
                 document.getElementById('sectionTitle').innerText = "תוצאות חיפוש עבור: " + term;
                 document.getElementById('sectionDesc').innerText = `נמצאו ${filtered.length} פקודות רלוונטיות.`;
                 document.getElementById('categoryFilter').innerHTML = '<option value="all">חיפוש חופשי</option>';
                 
                 this.renderCommands(filtered);
            },

            copyToClipboard(text) {
                const el = document.createElement('textarea');
                el.value = text;
                document.body.appendChild(el);
                el.select();
                document.execCommand('copy');
                document.body.removeChild(el);
                
                // Show simple feedback
                const btn = event.currentTarget;
                const originalIcon = btn.innerHTML;
                btn.innerHTML = '<i class="fas fa-check text-green-500"></i>';
                setTimeout(() => btn.innerHTML = originalIcon, 2000);
            }
        };

        window.onload = () => app.init();
    </script>
    <!-- Register service worker for offline/PWA support -->
    <script>
      if ('serviceWorker' in navigator) {
        window.addEventListener('load', function() {
          navigator.serviceWorker.register('service-worker.js').catch(function(e) {
            console.warn('Service worker registration failed:', e);
          });
        });
      }
    </script>

    <!-- Removed Google Translate widget integration -->
</body>
</html>